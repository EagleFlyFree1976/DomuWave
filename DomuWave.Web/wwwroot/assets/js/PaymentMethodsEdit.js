import{u as j,_ as L}from"./PaymentEditForm.js";import{v as q,f as A,r as f,h as T,s as E,c as _,a as p,b as t,d as s,i as l,w as m,x as w,t as y,e as V,k as M,F as G,l as H,o as c}from"./app.js";import{s as J,_ as K}from"./Error404.js";import{s as u}from"./index3.js";import{a as N,s as O}from"./index.js";import{s as Q}from"./index4.js";/* empty css                                                             */const W={key:0},X={class:"card"},Y={class:"h3 mb-0 text-gray-800"},Z={class:"flex items-center gap-2"},I={class:"card shadow mb-4"},ee={class:"card-body"},te={class:"container-fluid mt-4"},se={class:"w-50"},oe={class:"card flex justify-center"},ae={class:"row mb-3"},le={class:"col-sm-9"},ie={class:"row mb-3"},ne={class:"col-sm-9"},re={style:{display:"flex","justify-content":"flex-end",gap:"0.5rem","margin-top":"1rem"}},de={key:1},be={__name:"PaymentMethodsEdit",props:{paymentmethodid:Number},setup(F){const o=j();q();const b=A(),z=F;var v=f(!1),i=f({...o.edititem});const h=f(null);var r=f(!1);const g=f(null);console.log("editEntity ",i);const B=({values:a})=>{const e={};return i.value.name||(e.name=[{message:"Il nome Ã¨ obbligatorio."}]),{errors:e}};console.log("onFormSubmit pre");const $=async()=>{g.value&&await g.value.submit()},R=async({valid:a})=>{a&&(v.value=!0,console.log("editEntity",i.value),o.createmode?await o.createEntity(i.value):await o.updateEntity(i.value),v.value=!1)};console.log("onFormSubmit after");async function k(){}function D(){o.undoNewEntity()}function P(){console.log("newEntity"),r.value=!0}async function U(){await h.value.submitForm()&&(r.value=!1)}return T(async()=>{await k()}),E(()=>z.paymentmethodid,a=>{a!=null&&(a!=0?(b.startLoading(),console.log("Call paymentMethodStore.edit"),o.edit(a),console.log("paymentMethodStore.edit called"),b.stopLoading()):o.newEntity())},{immediate:!0}),E(()=>o.edititem,a=>{a!=null&&(console.log("watch newid",a),i.value={...o.edititem},console.log("END watch newid",a))},{immediate:!0}),(a,e)=>{const x=H("Message");return c(),_(G,null,[t(o).edititem!=null?(c(),_("div",W,[s("div",X,[l(t(J),{style:{padding:"1rem 1rem 1rem 1.5rem"}},{start:m(()=>[s("h1",Y," ["+y(t(o).edititem.id)+"] "+y(t(o).edititem.name),1)]),center:m(()=>e[6]||(e[6]=[])),end:m(()=>[s("div",Z,[l(t(u),{label:"Refresh",text:"",plain:"",onClick:k},{default:m(()=>e[7]||(e[7]=[s("i",{class:"fas fa-sync-alt"},null,-1)])),_:1,__:[7]}),l(t(u),{as:"a",label:"Crea metodo di pagamento",text:"",plain:"",onClick:e[0]||(e[0]=n=>P())},{default:m(()=>e[8]||(e[8]=[s("i",{class:"fa fa-plus-square"},null,-1)])),_:1,__:[8]}),t(o).createmode?(c(),w(t(u),{key:0,severity:"secondary",label:"Annulla",class:"btn btn-warning align-content-end",loading:t(v),onClick:D},null,8,["loading"])):p("",!0),l(t(u),{severity:"secondary",label:"Salva",class:"btn btn-primary align-content-end",loading:t(v),onClick:$},null,8,["loading"])])]),_:1})]),s("div",I,[s("div",ee,[s("div",te,[s("div",se,[s("div",oe,[l(t(Q),{ref_key:"formRef",ref:g,resolver:B,onSubmit:R,class:"flex flex-col gap-4 w-full sm:w-56"},{default:m(n=>{var C,S;return[s("div",ae,[e[9]||(e[9]=s("label",{for:"name",class:"col-sm-3 col-form-label"},"Nome",-1)),s("div",le,[l(t(N),{name:"name",type:"text",placeholder:"Inserisci il nome",fluid:"",modelValue:t(i).name,"onUpdate:modelValue":e[1]||(e[1]=d=>t(i).name=d),class:"form-control"},null,8,["modelValue"]),(C=n.name)!=null&&C.invalid?(c(),w(x,{key:0,severity:"error",size:"small",variant:"simple"},{default:m(()=>{var d;return[V(y((d=n.name.error)==null?void 0:d.message),1)]}),_:2},1024)):p("",!0)])]),s("div",ie,[e[10]||(e[10]=s("label",{for:"description",class:"col-sm-3 col-form-label"},"Descrizione",-1)),s("div",ne,[l(t(N),{name:"description",type:"text",placeholder:"Inserisci la descrizione",fluid:"",modelValue:t(i).description,"onUpdate:modelValue":e[2]||(e[2]=d=>t(i).description=d),class:"form-control"},null,8,["modelValue"]),(S=n.description)!=null&&S.invalid?(c(),w(x,{key:0,severity:"error",size:"small",variant:"simple"},{default:m(()=>{var d;return[V(y((d=n.description.error)==null?void 0:d.message),1)]}),_:2},1024)):p("",!0)])])]}),_:1},512)])])])])]),l(t(O),{header:"Crea metodo di pagamento",visible:t(r),"onUpdate:visible":e[5]||(e[5]=n=>M(r)?r.value=n:r=n),modal:!0,closable:!0,style:{width:"50rem"}},{default:m(()=>[l(L,{ref_key:"createForm",ref:h},null,512),s("div",re,[l(t(u),{type:"button",label:"Cancel",severity:"secondary",onClick:e[3]||(e[3]=n=>M(r)?r.value=!1:r=!1)}),l(t(u),{type:"button",label:"Save",class:"bg-gray-800 text-white border-none hover:bg-gray-800",onClick:e[4]||(e[4]=n=>U())})])]),_:1},8,["visible"])])):p("",!0),t(o).edititem==null&&!t(b).loading?(c(),_("div",de,[l(K,{backaction:/PaymentMethods/})])):p("",!0)],64)}}};export{be as default};
