import{r as g,f as D,g as S,h as B,c as m,d as t,i as a,w as o,b as s,F as V,j as F,k as _,l as L,m as j,o as f,n as C,t as i}from"./app.js";import{u as z}from"./accountStore.js";import{_ as N}from"./AccountCreateForm.js";import{s as T}from"./index.js";import{s as q}from"./Error404.js";import{s as M}from"./index2.js";import{s as u}from"./index3.js";import"./accountApi.js";import"./index4.js";import"./index5.js";import"./index6.js";import"./index7.js";const R={class:"card"},E={class:"flex items-center gap-2"},P={class:"card shadow mb-4"},O={class:"card-body"},U={class:"table-responsive"},G={class:"table table-bordered",id:"dataTable",width:"100%",cellspacing:"0"},H={style:{display:"flex","justify-content":"flex-end",gap:"0.5rem","margin-top":"1rem"}},nt={__name:"AccountsView",props:{},setup(I){const b=g(null);var n=g(!1);const p=z(),c=D(),k=S();async function h(r){c.startLoading(),await p.deleteAccount(r),await d(),c.stopLoading()}const x=(r,e)=>{k.require({target:r.currentTarget,message:"Sei sicuro di voler procedere con la cancellazione dell'account selezionato?",icon:"fas fa-exclamation-triangle yellow",rejectProps:{label:"Cancel",severity:"secondary",outlined:!0},acceptProps:{label:"Cancella",class:"bg-danger"},accept:()=>{h(e)},reject:()=>{}})};async function d(){c.startLoading(),await p.loadAllAccounts(),c.stopLoading()}B(async()=>{await d()});function A(){n.value=!0}async function $(){await b.value.submitForm()&&(n.value=!1,await d())}return(r,e)=>{const v=L("router-link"),y=j("date");return f(),m("div",null,[t("div",R,[a(s(q),{style:{padding:"1rem 1rem 1rem 1.5rem"}},{start:o(()=>e[4]||(e[4]=[t("h1",{class:"h3 mb-0 text-gray-800"},"Accounts",-1)])),center:o(()=>e[5]||(e[5]=[])),end:o(()=>[t("div",E,[a(s(u),{label:"Refresh",text:"",plain:"",onClick:d},{default:o(()=>e[6]||(e[6]=[t("i",{class:"fas fa-sync-alt"},null,-1)])),_:1,__:[6]}),a(s(u),{as:"a",label:"Crea account",text:"",plain:"",onClick:e[0]||(e[0]=l=>A())},{default:o(()=>e[7]||(e[7]=[t("i",{class:"fa fa-plus-square"},null,-1)])),_:1,__:[7]})])]),_:1})]),t("div",P,[t("div",O,[t("div",U,[a(s(M)),t("table",G,[e[11]||(e[11]=t("thead",null,[t("tr",null,[t("th",null,"Tipo"),t("th",null,"Valuta"),t("th",null,"Name"),t("th",null,"Description"),t("th",null,"Aperto il "),t("th",null,"Chiuso il"),t("th",null,"Bilancio ad oggi"),t("th",null,"Bilancio a fine mese"),t("th")])],-1)),t("tbody",null,[(f(!0),m(V,null,F(s(p).accounts,l=>(f(),m("tr",null,[t("td",null,i(l.accountType.description),1),t("td",null,i(l.currency.description),1),t("td",null,i(l.name),1),t("td",null,i(l.description),1),C(t("td",null,null,512),[[y,l.openDate,"date"]]),C(t("td",null,null,512),[[y,l.closedDate,"date"]]),t("td",null,i(l.report.balance),1),t("td",null,i(l.report.balanceEOM),1),t("td",null,[a(v,{class:"btn",title:"Modifica account",to:`/accounts/${l.id}`},{default:o(()=>e[8]||(e[8]=[t("i",{class:"far fa-edit"},null,-1)])),_:2,__:[8]},1032,["to"]),a(v,{class:"btn",title:"Vai alla dashboard",to:`/accounts/${l.id}/dashboard`},{default:o(()=>e[9]||(e[9]=[t("i",{class:"fas fa-tachometer-alt"},null,-1)])),_:2,__:[9]},1032,["to"]),a(s(u),{onClick:w=>x(w,l.id),label:"Delete",severity:"danger",outlined:""},{default:o(()=>e[10]||(e[10]=[t("i",{class:"far fa-minus-square"},null,-1)])),_:2,__:[10]},1032,["onClick"])])]))),256))])])])]),a(s(T),{header:"Crea account",visible:s(n),"onUpdate:visible":e[3]||(e[3]=l=>_(n)?n.value=l:n=l),modal:!0,closable:!0,style:{width:"50rem"}},{default:o(()=>[a(N,{ref_key:"createForm",ref:b},null,512),t("div",H,[a(s(u),{type:"button",label:"Cancel",severity:"secondary",onClick:e[1]||(e[1]=l=>_(n)?n.value=!1:n=!1)}),a(s(u),{type:"button",label:"Save",class:"bg-gray-800 text-white border-none hover:bg-gray-800",onClick:e[2]||(e[2]=l=>$())})])]),_:1},8,["visible"])])])}}};export{nt as default};
