import{ag as h,P as m,v as l,S as i,f as g,U as c}from"./app.js";const n=h.create({baseURL:"http://localhost:60101/api",timeout:1e4});n.interceptors.request.use(t=>{const r=localStorage.getItem("auth_token");return r&&(t.headers["X-Auth-Token"]=r),t});const p=m("paymentMethodStore",{state:()=>({paymentmethods:null,createmode:!1,loading:!1,error:null,edititem:null,createitem:null}),actions:{async loadDashboard(t){var a,s;const r=l();this.loading=!0,this.error=null;try{const e=await accountApi.get(`/Accounts/${t}/dashboard`);this.dashboarddata=e.data,console.log("this.dashboarddata",this.dashboarddata)}catch(e){console.log("Error",e),r.setMessages("Non è stato possibile caricare la dashboard dell'account specificato",i.error),this.error=((s=(a=e.response)==null?void 0:a.data)==null?void 0:s.message)||"Errore durante il caricamento dell'account specificato"}finally{this.loading=!1}},async createEntity(t){await this.updateEntity(t)},async updateEntity(t){var s,e;const r=l(),a=g();this.loading=!0,this.error=null;try{let o="/Admin/PaymentMethods",d=null;t.id!=0?(o=`${o}/${t.id}`,d=await n.put(o,{name:t.name,description:t.description})):(d=await n.post(o,{name:t.name,description:t.description}),this.edititem.id=d.headers["x-key"],t.id=d.headers["x-key"],this.createmode=!1),a.loadMenu(),this.edititem={...t},this.createmode=!1,r.addMessage(c.SUCCESS.SAVE,i.success),console.log("this.edititem",this.edititem)}catch(o){console.log("Error",o),r.setMessages(o.response.data.Errors,i.error),this.error=((e=(s=o.response)==null?void 0:s.data)==null?void 0:e.message)||c.ERROR.SAVE}finally{this.loading=!1}},async newEntity(){this.createmode=!0,this.edititem={name:"[New]",description:"",id:0}},async edit(t){var a,s;const r=l();this.loading=!0,this.error=null;try{const e=await n.get(`/PaymentMethods/${t}`);this.edititem=e.data,this.createmode=!1,console.log("this.edititem",this.edititem)}catch(e){console.log("Error",e),r.setMessages("Non è stato possibile caricare i dati",i.error),this.error=((s=(a=e.response)==null?void 0:a.data)==null?void 0:s.message)||"Errore durante il caricamento dei dati"}finally{this.loading=!1}},async deletePaymentMethod(t){var a,s;const r=l();this.loading=!0,this.error=null;try{const e=await n.delete(`/PaymentMethods/${t}`);await this.loadAllPaymentMethods()}catch(e){console.log("Error",e),r.setMessages(e.response.data.Errors,i.error),this.error=((s=(a=e.response)==null?void 0:a.data)==null?void 0:s.message)||"Errore durante il caricamento dei metodi di pagamento"}finally{this.loading=!1}},async disablePaymentMethod(t){var a,s;const r=l();this.loading=!0,this.error=null;try{const e=await n.patch(`/PaymentMethods/${t}/disable`);await this.loadAllPaymentMethods()}catch(e){console.log("Error",e),r.setMessages(e.response.data.Errors,i.error),this.error=((s=(a=e.response)==null?void 0:a.data)==null?void 0:s.message)||"Errore durante il caricamento dei metodi di pagamento"}finally{this.loading=!1}},async enablePaymentMethod(t){var a,s;const r=l();this.loading=!0,this.error=null;try{const e=await n.patch(`/PaymentMethods/${t}/enable`);await this.loadAllPaymentMethods()}catch(e){console.log("Error",e),r.setMessages(e.response.data.Errors,i.error),this.error=((s=(a=e.response)==null?void 0:a.data)==null?void 0:s.message)||"Errore durante il caricamento dei metodi di pagamento"}finally{this.loading=!1}},async loadAllPaymentMethods(){var r,a;const t=l();this.loading=!0,this.error=null;try{const s=await n.get("/PaymentMethods");this.paymentmethods=s.data}catch(s){console.log("Error",s),t.setMessages("Non è stato possibile caricare i metodi di pagamento",i.error),this.error=((a=(r=s.response)==null?void 0:r.data)==null?void 0:a.message)||"Errore durante il caricamento dei metodi di pagamento"}finally{this.loading=!1}}},computed:{}});export{n as a,p as u};
