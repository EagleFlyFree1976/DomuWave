import{u as g}from"./accountStore.js";import{p as I,m as y,c as b,o as A,d as n,q as v,a as h,n as p,e as l,f as w,s as D,b as o,i as d,w as e,t as $,l as k}from"./app.js";import{A as B}from"./AccountTabber.js";import{s as E,_ as N}from"./Error404.js";import{s as S}from"./index3.js";import"./accountApi.js";import"./index4.js";import"./index8.js";import"./index7.js";const U={class:"col-xl-3 col-md-6 mb-4"},C={class:"card border-left-primary shadow h-100 py-2"},M={class:"card-body"},T={class:"row no-gutters align-items-center"},V={class:"col mr-2"},L={class:"text-xs font-weight-bold text-primary text-uppercase mb-1"},z={key:0},O={class:"small text-muted"},j={class:"small text-muted"},Q={class:"h5 mb-0 font-weight-bold text-gray-800"},q={class:"card-footer"},F={class:"row no-gutters align-items-center"},R={class:"col mr-2"},G={class:"text-xs font-weight-bold text-primary text-uppercase mb-1 float-md-right"},H={key:0},J={key:0,class:"fas fa-long-arrow-alt-down text-success"},K={key:1,class:"fas fa-long-arrow-alt-up text-danger"},c={__name:"Box",props:{inItem:Object,outItem:Object,inAmount:Number,outAmount:Number},setup(m){const t=m,f=I(()=>Math.abs(t.inAmount)-Math.abs(t.outAmount));return(s,r)=>{const _=y("date"),u=y("currency");return A(),b("div",U,[n("div",C,[n("div",M,[n("div",T,[n("div",V,[n("div",L,[v(s.$slots,"header"),m.inItem!=null?(A(),b("div",z,[p(n("span",O,null,512),[[_,m.inItem.period.firstDay,"date"]]),r[0]||(r[0]=l(" - ")),p(n("span",j,null,512),[[_,m.inItem.period.lastDay,"date"]])])):h("",!0)]),n("div",Q,[r[1]||(r[1]=n("i",{class:"fas fa-long-arrow-alt-down text-success"},null,-1)),p(n("span",null,null,512),[[u,{amount:m.inAmount}]]),r[2]||(r[2]=l(" / ")),r[3]||(r[3]=n("i",{class:"fas fa-long-arrow-alt-up text-danger"},null,-1)),p(n("span",null,null,512),[[u,{amount:m.outAmount}]])])]),r[4]||(r[4]=n("div",{class:"col-auto"},[n("i",{class:"fas fa-euro-sign fa-2x text-gray-300"})],-1))])]),n("div",q,[n("div",F,[n("div",R,[n("div",G,[m.inItem!=null?(A(),b("div",H,[f.value>0?(A(),b("i",J)):(A(),b("i",K)),p(n("span",null,null,512),[[u,{amount:f.value}]])])):h("",!0)])])])])])])}}},P={key:0},W={class:"card"},X={class:"h3 mb-0 text-gray-800"},Y={class:"flex items-center gap-2"},Z={class:"row"},tt={class:"row"},at={class:"row"},ot={key:1},ft={__name:"AccountDashboardView",props:{accountid:Number},setup(m){const t=g(),f=w();function s(u,a,i){return!u||!Array.isArray(u.totals)?{amount:0,period:{firstDay:0,lastDay:0}}:u.totals.find(x=>x.movementType===a&&x.period.period===i)||{amount:0,period:{firstDay:0,lastDay:0}}}const r=m;async function _(){f.startLoading(),await t.loadDashboard(r.accountid),f.stopLoading()}return D(()=>r.accountid,async u=>{u!=null&&(f.startLoading(),await t.loadDashboard(u),f.stopLoading())},{immediate:!0}),(u,a)=>{const i=k("icon");return A(),b("div",null,[m.accountid!=null&&o(t).dashboarddata!=null&&!o(f).loading?(A(),b("div",P,[n("div",W,[d(o(E),{style:{padding:"1rem 1rem 1rem 1.5rem"}},{start:e(()=>[n("h1",X," Dashboard: "+$(o(t).dashboarddata.accountName),1)]),center:e(()=>a[0]||(a[0]=[])),end:e(()=>[n("div",Y,[d(o(S),{label:"Refresh",text:"",plain:"",onClick:_},{default:e(()=>a[1]||(a[1]=[n("i",{class:"fas fa-sync-alt"},null,-1)])),_:1,__:[1]})])]),_:1}),d(B,{accountid:r.accountid},null,8,["accountid"])]),n("div",Z,[d(c,{inAmount:o(t).dashboarddata.accountBalance,outAmount:o(t).dashboarddata.availableBalance},{header:e(()=>a[2]||(a[2]=[l(" Bilanzio Contabile / Disponibile ")])),default:e(()=>[d(i,null,{default:e(()=>a[3]||(a[3]=[n("i",{class:"fas fa-calendar fa-2x text-gray-300"},null,-1)])),_:1,__:[3]})]),_:1},8,["inAmount","outAmount"])]),n("div",tt,[d(c,{inItem:s(o(t).dashboarddata,0,0),outItem:s(o(t).dashboarddata,1,0),inAmount:s(o(t).dashboarddata,0,0).amount,outAmount:s(o(t).dashboarddata,1,0).amount},{header:e(()=>a[4]||(a[4]=[l(" Entrate / Uscite (Oggi) ")])),default:e(()=>[d(i,null,{default:e(()=>a[5]||(a[5]=[n("i",{class:"fas fa-calendar fa-2x text-gray-300"},null,-1)])),_:1,__:[5]})]),_:1},8,["inItem","outItem","inAmount","outAmount"]),d(c,{inItem:s(o(t).dashboarddata,0,1),outItem:s(o(t).dashboarddata,1,1),inAmount:s(o(t).dashboarddata,0,1).amount,outAmount:s(o(t).dashboarddata,1,1).amount},{header:e(()=>a[6]||(a[6]=[l(" Entrate / Uscite (Settimana corrente) ")])),default:e(()=>[d(i,null,{default:e(()=>a[7]||(a[7]=[n("i",{class:"fas fa-calendar fa-2x text-gray-300"},null,-1)])),_:1,__:[7]})]),_:1},8,["inItem","outItem","inAmount","outAmount"]),d(c,{inItem:s(o(t).dashboarddata,0,2),outItem:s(o(t).dashboarddata,1,2),inAmount:s(o(t).dashboarddata,0,2).amount,outAmount:s(o(t).dashboarddata,1,2).amount},{header:e(()=>a[8]||(a[8]=[l(" Entrate / Uscite (Mese corrente) ")])),default:e(()=>[d(i,null,{default:e(()=>a[9]||(a[9]=[n("i",{class:"fas fa-calendar fa-2x text-gray-300"},null,-1)])),_:1,__:[9]})]),_:1},8,["inItem","outItem","inAmount","outAmount"]),d(c,{inItem:s(o(t).dashboarddata,0,3),outItem:s(o(t).dashboarddata,1,3),inAmount:s(o(t).dashboarddata,0,3).amount,outAmount:s(o(t).dashboarddata,1,3).amount},{header:e(()=>a[10]||(a[10]=[l(" Entrate / Uscite (Quarter corrente) ")])),default:e(()=>[d(i,null,{default:e(()=>a[11]||(a[11]=[n("i",{class:"fas fa-calendar fa-2x text-gray-300"},null,-1)])),_:1,__:[11]})]),_:1},8,["inItem","outItem","inAmount","outAmount"])]),n("div",at,[d(c,{inItem:s(o(t).dashboarddata,0,4),outItem:s(o(t).dashboarddata,1,4),inAmount:s(o(t).dashboarddata,0,4).amount,outAmount:s(o(t).dashboarddata,1,4).amount},{header:e(()=>a[12]||(a[12]=[l(" Entrate / Uscite (Ieri) ")])),default:e(()=>[d(i,null,{default:e(()=>a[13]||(a[13]=[n("i",{class:"fas fa-calendar fa-2x text-gray-300"},null,-1)])),_:1,__:[13]})]),_:1},8,["inItem","outItem","inAmount","outAmount"]),d(c,{inItem:s(o(t).dashboarddata,0,5),outItem:s(o(t).dashboarddata,1,5),inAmount:s(o(t).dashboarddata,0,5).amount,outAmount:s(o(t).dashboarddata,1,5).amount},{header:e(()=>a[14]||(a[14]=[l(" Entrate / Uscite (Settimana precedente) ")])),default:e(()=>[d(i,null,{default:e(()=>a[15]||(a[15]=[n("i",{class:"fas fa-calendar fa-2x text-gray-300"},null,-1)])),_:1,__:[15]})]),_:1},8,["inItem","outItem","inAmount","outAmount"]),d(c,{inItem:s(o(t).dashboarddata,0,6),outItem:s(o(t).dashboarddata,1,6),inAmount:s(o(t).dashboarddata,0,6).amount,outAmount:s(o(t).dashboarddata,1,6).amount},{header:e(()=>a[16]||(a[16]=[l(" Entrate / Uscite (Mese precedente) ")])),default:e(()=>[d(i,null,{default:e(()=>a[17]||(a[17]=[n("i",{class:"fas fa-calendar fa-2x text-gray-300"},null,-1)])),_:1,__:[17]})]),_:1},8,["inItem","outItem","inAmount","outAmount"]),d(c,{inItem:s(o(t).dashboarddata,0,7),outItem:s(o(t).dashboarddata,1,7),inAmount:s(o(t).dashboarddata,0,7).amount,outAmount:s(o(t).dashboarddata,1,7).amount},{header:e(()=>a[18]||(a[18]=[l(" Entrate / Uscite (Quarter precedente) ")])),default:e(()=>[d(i,null,{default:e(()=>a[19]||(a[19]=[n("i",{class:"fas fa-calendar fa-2x text-gray-300"},null,-1)])),_:1,__:[19]})]),_:1},8,["inItem","outItem","inAmount","outAmount"])])])):h("",!0),o(t).dashboarddata==null&&!o(f).loading?(A(),b("div",ot,[d(N,{backaction:/accounts/})])):h("",!0)])}}};export{ft as default};
